{# src/Tixi/App/TeamBundle/Resources/views/Default/index.html.twig #}
{# 01.10.2013 martin jonasse update for list (table) object #}
{# 11.10.2013 martin jonasse split list and form files #}

{% extends 'TixiHomeBundle:Default:index.html.twig' %}

{% block title %}{{ app.session.get('title') }}{% endblock %}

{% block content %}
{# render a form for the variable form_meta ............ #}
<div class="content-wrapper">
    <form name="tixi_form"
          action="{{ path( app.request.attributes.get('_route'), {'action':'save'} ) }}"
          method="POST"  >
        {% for record in form_meta %}
            <p class="control-standard">
                {% if ((record.Rendered == 'checkbox') and (record.Hidden == '0')) %}
                    <label for="fpw_{{ record.Field }}">{{ record.Field }}</label>
                    <input name="{{ record.Field }}"
                           id="fpw_{{ record.Field }}"
                           type="checkbox"
                           value="{{ form_data[record.Field] }}"
                           style="width: 20px">
                    <i id="fpr_{{ record.Field }}_error" style="color:red">{{ record.Error }}</i><br />
                    <span><small>{{ record.Comment }}
                                 {% if record.Null == 'NO' %}(obligatorisch){% endif %}</small></span>

                {% elseif ((record.Rendered == 'textarea') and (record.Hidden == '0')) %}
                    <label for="fpw_{{ record.Field }}">{{ record.Field }}</label>
                    <textarea name="{{ record.Field }}"
                              id="fpw_{{ record.Field }}">{{ form_data[record.Field] }}</textarea>
                    <i id="fpr_{{ record.Field }}_error" style="color:red">{{ record.Error }}</i><br />
                    <span><small>{{ record.Comment }}
                                 {% if record.Null == 'NO' %}(obligatorisch){% endif %}</small></span>

                {% elseif ((record.Rendered == 'text') and (record.Hidden == '0')) %}
                    <label for="fpw_{{ record.Field }}">{{ record.Field }}</label>
                    <input name="{{ record.Field }}"
                           id="fpw_{{ record.Field }}"
                           type="text"
                           value="{{ form_data[record.Field] }}"
                           {% if record.Length != '0' %} maxlength={{ record.Length }}{% endif %}
                           {% if record.Null == 'NO' %} required{% endif %}
                           {% if record.Readonly %} disabled{% endif %} />
                    <i id="fpr_{{ record.Field }}_error" style="color:red">{{ record.Error }}</i><br />
                    <span><small>{{ record.Comment }}
                                 {% if record.Null == 'NO' %}(obligatorisch){% endif %}</small></span>

                {% elseif (record.Hidden == '0') %}
                    <label for="fpw_{{ record.Field }}">{{ record.Field }}</label>
                    <input name="{{ record.Field }}"
                           id="fpw_{{ record.Field }}"
                           type="text"
                           value="Field type '{{ record.Type }}' not mapped to HTML."
                           style="color:red" disabled />
                    <i id="fpr_{{ record.Field }}_error" style="color:red">{{ record.Error }}</i><br />
                    <span><small>{{ record.Comment }}
                                 {% if record.Null == 'NO' %}(obligatorisch){% endif %}</small></span>

                {% endif %}
            </p>
        {% endfor %}
    </form>
</div>
{# render a message ............ #}
<div class="content-wrapper">
    <p>{{ message }}</p>
</div>
{% endblock %}