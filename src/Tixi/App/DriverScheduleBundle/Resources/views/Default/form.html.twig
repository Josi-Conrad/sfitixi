{# src/Tixi/App/DriverScheduleBundle/Resources/views/Default/index.html.twig        #}
{# 07.01.2014 martin jonasse copied from HomeBundle ans adapted to schedule         #}
{# 22.01.2014 martin jonasse replaced shifts.html.twig by session.get('shiftsHTML') #}

{% extends 'TixiHomeBundle:Default:index.html.twig' %}

{% block content %}
{# render a form for the variable myform ............ #}
<div class="content-wrapper">
    <form name="tixi_form"
          action="{{ path( app.request.attributes.get('_route'), {'action':'save'} ) }}"
          method="POST">

        <table class="VierQuadForm" summary="Auswahlformular mit 4 Quadranten">
            <tbody>
                <tr>
                    <td>
                        <p class="control-standard">
                            {# einsatzplan_id ............ #}
                            {% set record = myform.0 %}
                            <label for="fpw_{{ record.Field }}">{{ record.Field }}</label>
                            <input name="{{ record.Field }}"
                               id="fpw_{{ record.Field }}"
                               type="number"
                               value="{{ record.Value }}"
                               title="{{ record.Comment }}"
                               disabled
                            />
                            {# einsatzplan.istAktive  ............ #}
                            {% set record = myform.4 %}
                            <input name="{{ record.Field }}"
                                   type="hidden"
                                   value="0">
                            <input name="{{ record.Field }}"
                                   id="fpw_{{ record.Field }}"
                                   type="checkbox"
                                   value="1"
                                   title="{{ record.Comment }}"
                                    {% if record.Value == "1" %} checked{% endif %}
                                   style="width: 20px">
                            istAktive
                        </p>

                        <p class="control-standard">
                            {# einsatzplan_betreff  ............ #}
                            {% set record = myform.2 %}
                            <label for="fpw_{{ record.Field }}">{{ record.Field }}</label>
                            <input required
                               name="{{ record.Field }}"
                               id="fpw_{{ record.Field }}"
                               type="text"
                               value="{{ record.Value }}"
                               title="{{ record.Comment }}"
                            />
                            {% if record.Error != "" %}
                                <br><i id="fpr_{{ record.Field }}_error" style="color:red">{{ record.Error }}</i>
                            {% endif %}
                        </p>
                    </td>
                    <td>
                        <p class="control-standard">
                            {# memo ............ #}
                            {% set record = myform.3 %}
                            <label for="fpw_{{ record.Field }}">{{ record.Field }}</label>
                            <textarea style="width: 480px; height: 50px;"
                                  name="{{ record.Field }}"
                                  id="fpw_{{ record.Field }}"
                                  title="{{ record.Comment }}"
                            >{{ record.Value }}</textarea>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>
                            Klicken Sie bitte auf die Daten, an denen gefahren werden soll:
                        </p>
                        <div class="jq_taskdatepicker"></div>
                        <p>Die gewählte Daten erscheinen rechts, abwählen durch erneutes klicken.</p>
                        <p>Duplikate und Überlappungen mit andere Einsätze und Pläne sind möglich,<br>
                            bitte auf Konflikte kontrollieren in Rapport in "Fahrer - Agenda".</p>
                    </td>
                    <td>
                    <p>Klicken Sie bitte auf die Schicht, während dessen gefahren werden soll:</p>
                    {# template for a list of shifts ............ #}
                    <div id="shifts" hidden>
                        {{ app.session.get('shiftsHTML') | raw }}
                    </div>
                    {# template for the trashcan image object ............ #}
                    <div id="trashcan" hidden>
                        <img src="{{ asset('images/trashcan.gif') }}"
                             alt="Zeile löschen"
                             onclick="deleteElement('task?')"/>
                    </div>
                    {#  jq_taskdatepicker - placeholder for tasks ............ #}
                    <div id="tasks">
                        {% for taskobject in mysubform %}
                            {{  taskobject | raw }}
                        {% endfor %}
                    </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </form>
</div>
{% endblock %}
