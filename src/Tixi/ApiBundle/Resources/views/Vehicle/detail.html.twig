{% extends '::base.html.twig' %}
{% set topNavigationActivePage = 'get_vehicles' %}
{% block body %}
    <div class="entityDetailView">
        <div class="leftColumn">
            <table>
                <tr>
                    <td>Name:</td>
                    <td>{{ vehicle.name }}</td>
                </tr>
                <tr>
                    <td>Lizenznummer:</td>
                    <td>{{ vehicle.licenceNumber }}</td>
                </tr>
            </table>
        </div>
        <div class="rightColumn">
            <div class="dataGrid" data-gridid="serviceplans">
                {% embed 'TixiApiBundle:Shared:datagrid.table.html.twig'%}
                    {% block customListActionControl %}
                        {% embed 'TixiApiBundle:Shared:datagrid.list.selectedAction.html.twig' %}
                            {% block selectedactions %}
                                <li><a data-targetSrc="{{ path('edit_vehicle',{'vehicleId':'--selectionid--'}) }}" class="customActionWithSelection" href="#">Editieren</a></li>
                                <li><a data-targetSrc="{{ path('new_vehicle_serviceplan',{'vehicleId':'--selectionid--'}) }}" class="customActionWithSelection" href="#">Neuer Serviceplan</a></li>
                                <li class="divider"></li>
                                <li><a data-targetSrc="{{ path('edit_vehicle',{'vehicleId':'--selectionid--'}) }}" class="customActionWithSelection" href="#">LÃ¶schen</a></li>
                            {% endblock %}
                        {% endembed %}
                        <button type="button" class="btn btn-primary customAction" data-targetSrc="{{ path('new_vehicle') }}">Neues Fahrzeug</button>
                    {% endblock %}
                {%  endembed %}
            </div>
        </div>
    </div>
{% endblock %}

{% block javascriptscustom %}
    <script>
        {#jQuery(function($) {#}
            {#var vehiclesDataGrid = new DataGrid();#}
            {#vehiclesDataGrid.init({#}
                {#gridId : 'serviceplans',#}
                {#dataURL: '{{ vehicle.id }}/serviceplans',#}
                {#dataIdentifier: 'serviceplans',#}
                {#dataFieldId : 'id',#}
                {#fields : [#}
                    {#{'fieldId':'startDate', 'fieldDisplayName':'Anfang'},#}
                    {#{'fieldId':'endDate', 'fieldDisplayName':'Ende'},#}
                    {#{'fieldId':'cost', 'fieldDisplayName':'Kosten'}#}
                {#]#}
            {#});#}
        {#});#}
    </script>
{% endblock %}